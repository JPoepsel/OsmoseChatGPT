diff --git a/src/config_settings.h b/src/config_settings.h
new file mode 100644
index 0000000..1111111
--- /dev/null
+++ b/src/config_settings.h
@@ -0,0 +1,30 @@
+#pragma once
+#include <ArduinoJson.h>
+
+extern DynamicJsonDocument configDoc;
+bool configLoad();
+bool configSave();
+
+#define CFG(key,def) (configDoc[key] | def)
+
+extern float producedLiters;
+void prodAdd(float d);
+void prodCheckLimit(bool isManualMode);
+void prodHandleResets(bool lowSwitch,bool switchOffToOn);
+
+diff --git a/src/config_settings.cpp b/src/config_settings.cpp
+new file mode 100644
+index 0000000..1111111
+--- /dev/null
++++ b/src/config_settings.cpp
+@@ -0,0 +1,120 @@
++#include "config_settings.h"
++#include <SPIFFS.h>
++
++DynamicJsonDocument configDoc(2048);
++
++float producedLiters = 0.0f;
++static bool productionLockedManual = false;
++static bool productionLockedAuto   = false;
++static bool lastLowSwitch = false;
++
++bool configLoad(){
++  if(!SPIFFS.exists("/config.json")){
++    Serial.println("[CFG] no config.json -> defaults");
++    return false;
++  }
++  File f = SPIFFS.open("/config.json","r");
++  if(!f) return false;
++  auto e = deserializeJson(configDoc,f);
++  f.close();
++  if(e){
++    Serial.println("[CFG] load failed");
++    return false;
++  }
++  Serial.println("[CFG] loaded");
++  return true;
++}
++
++bool configSave(){
++  File f = SPIFFS.open("/config.json","w");
++  if(!f) return false;
++  serializeJsonPretty(configDoc,f);
++  f.close();
++  Serial.println("[CFG] saved");
++  return true;
++}
++
++void prodAdd(float d){
++  producedLiters += d;
++  Serial.printf("[PROD] +%.3fL total=%.3fL\n",d,producedLiters);
++}
++
++void prodCheckLimit(bool isManualMode){
++  float maxProd = CFG("maxProductionLiters",0.0f);
++  if(maxProd<=0) return;
++  if(producedLiters>=maxProd){
++    Serial.println("[PROD] limit reached -> IDLE");
++    setState(STATE_IDLE);
++    if(isManualMode){
++      productionLockedManual=true;
++      Serial.println("[PROD] locked (manual)");
++    }else{
++      productionLockedAuto=true;
++      Serial.println("[PROD] locked (auto)");
++    }
++  }
++}
++
++void prodHandleResets(bool lowSwitch,bool switchOffToOn){
++  if(productionLockedAuto && lastLowSwitch && !lowSwitch){
++    producedLiters=0;
++    productionLockedAuto=false;
++    Serial.println("[PROD] auto reset");
++  }
++  if(productionLockedManual && switchOffToOn){
++    producedLiters=0;diff --git a/src/config_settings.h b/src/config_settings.h
new file mode 100644
index 0000000..1111111
--- /dev/null
+++ b/src/config_settings.h
@@ -0,0 +1,48 @@
+#pragma once
+
+#include <Arduino.h>
+#include <ArduinoJson.h>
+
+/* ============================================================

GLOBAL CONFIG JSON

============================================================ */

+extern JsonDocument configDoc;
+
+bool configLoad();
+bool configSave();
+
+#define CFG(key,def) (configDoc[key] | (def))
+
+
+/* ============================================================

PRODUCTION LIMIT SYSTEM

(logic only â€“ NO state machine access here)

============================================================ */

+extern float producedLiters;
+
+void prodAdd(float deltaLiters);
+
+/* returns true if limit reached /
+bool prodCheckLimit(bool isManualMode);
+
+void prodHandleResets(bool lowSwitch, bool switchOffToOn);
+
+
+diff --git a/src/config_settings.cpp b/src/config_settings.cpp
+new file mode 100644
+index 0000000..1111111
+--- /dev/null
++++ b/src/config_settings.cpp
+@@ -0,0 +1,126 @@
++#include "config_settings.h"
++#include <SPIFFS.h>
++
++JsonDocument configDoc;
++
++float producedLiters = 0.0f;
++
++static bool productionLockedManual = false;
++static bool productionLockedAuto = false;
++static bool lastLowSwitch = false;
++
++/ ============================================================
++ CONFIG
++ ============================================================ /
++
++bool configLoad(){
++
++ if(!SPIFFS.exists("/config.json")){
++ Serial.println("[CFG] no config.json -> defaults");
++ return false;
++ }
++
++ File f = SPIFFS.open("/config.json","r");
++ if(!f) return false;
++
++ auto e = deserializeJson(configDoc,f);
++ f.close();
++
++ if(e){
++ Serial.println("[CFG] load failed");
++ return false;
++ }
++
++ Serial.println("[CFG] loaded");
++ return true;
++}
++
++
++bool configSave(){
++
++ File f = SPIFFS.open("/config.json","w");
++ if(!f) return false;
++
++ serializeJsonPretty(configDoc,f);
++ f.close();
++
++ Serial.println("[CFG] saved");
++ return true;
++}
++
++
++/ ============================================================
++ PRODUCTION COUNTER
++ ============================================================ */
++
++void prodAdd(float d){
++ producedLiters += d;
++ Serial.printf("[PROD] +%.3fL total=%.3fL\n", d, producedLiters);
++}
++
++
++bool prodCheckLimit(bool isManualMode){
++
++ float maxProd = CFG("maxProductionLiters", 0.0f);
++
++ if(maxProd <= 0) return false;
++
++ if(producedLiters >= maxProd){
++
++ Serial.println("[PROD] limit reached");
++
++ if(isManualMode){
++ productionLockedManual = true;
++ Serial.println("[PROD] locked (manual)");
++ } else {
++ productionLockedAuto = true;
++ Serial.println("[PROD] locked (auto)");
++ }
++
++ return true;
++ }
++
++ return false;
++}
++
++
++void prodHandleResets(bool lowSwitch, bool switchOffToOn){
++
++ if(productionLockedAuto && lastLowSwitch && !lowSwitch){
++ producedLiters = 0;
++ productionLockedAuto = false;
++ Serial.println("[PROD] auto reset");
++ }
++
++ if(productionLockedManual && switchOffToOn){
++ producedLiters = 0;
++ productionLockedManual = false;
++ Serial.println("[PROD] manual reset");
++ }
++
++ lastLowSwitch = lowSwitch;
++}
++    productionLockedManual=false;
++    Serial.println("[PROD] manual reset");
++  }
++  lastLowSwitch=lowSwitch;
++}
